{"ast":null,"code":"import _slicedToArray from\"C:/Users/Sycol/ReactProjects/virtual-emporium/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{useNavigate}from'react-router-dom';import RemoveWishListItemModal from'../RemoveWishListItemModal';import'../../styles/WishList/WishList.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WishList=function WishList(_ref){var windowWidth=_ref.windowWidth,wishList=_ref.wishList,userInfo=_ref.userInfo,getUserWishListInfo=_ref.getUserWishListInfo,isLoggedIn=_ref.isLoggedIn;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),removeModalOpen=_useState2[0],setRemoveModalOpen=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),modalIndex=_useState4[0],setModalIndex=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),imgBounds=_useState6[0],setImgBounds=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggleUseEffectHook=_useState8[0],setToggleUseEffectHook=_useState8[1];var imgRef=useRef(null);var navigate=useNavigate();useEffect(function(){if(isLoggedIn){getUserWishListInfo();}},[]);useEffect(function(){if(!removeModalOpen){setModalIndex(null);}},[removeModalOpen]);useEffect(function(){if(imgRef.current){var bounds=imgRef.current.getBoundingClientRect();setImgBounds(bounds);if(bounds.height!==bounds.width){if(toggleUseEffectHook){setToggleUseEffectHook(false);}else{setToggleUseEffectHook(true);}}}},[imgRef,windowWidth,toggleUseEffectHook,wishList]);if(!isLoggedIn){return/*#__PURE__*/_jsx(\"div\",{className:\"mainLoaderWrapper\",children:/*#__PURE__*/_jsx(\"span\",{className:\"mainLoader\"})});}return/*#__PURE__*/_jsx(\"section\",{className:\"wishListWrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wishListContent\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"wishListAccountInfoTxt\",children:[\"Logged in as: \",userInfo.email]}),/*#__PURE__*/_jsx(\"h2\",{className:\"wishListTitle\",children:\"Wish List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"wishListMainContentWrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"wishListProductsWrapper\",children:wishList.map(function(product,index){return/*#__PURE__*/_jsx(\"div\",{className:\"wishListProductWrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"wishListProductContent\",onClick:function onClick(){navigate(\"/product/\".concat(product.id));},children:[/*#__PURE__*/_jsx(\"img\",{src:product.image,className:\"wishListProductImg\",alt:\"wish list item\",onMouseDown:function onMouseDown(e){return e.preventDefault();},ref:imgRef,style:{height:imgBounds===null||imgBounds===void 0?void 0:imgBounds.width}}),/*#__PURE__*/_jsxs(\"div\",{className:\"wishListProductInfoWrapper\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"wishListProductCategory\",children:product.category.toUpperCase()}),/*#__PURE__*/_jsx(\"h4\",{className:\"wishListProductTitle\",children:product.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"wishListProductPrice\",children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"div\",{className:\"wishListProductRemoveBtnWrapper\",children:/*#__PURE__*/_jsx(\"button\",{className:\"wishListProductRemoveBtn\",onClick:function onClick(e){e.stopPropagation();setModalIndex(index);setRemoveModalOpen(true);document.body.style.overflowY='hidden';},children:\"Remove\"})}),removeModalOpen&&modalIndex===index&&/*#__PURE__*/_jsx(RemoveWishListItemModal,{setRemoveModalOpen:setRemoveModalOpen,product:product,getUserWishListInfo:getUserWishListInfo,wishList:wishList})]})]})},index);})})})]})});};export default WishList;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","RemoveWishListItemModal","jsx","_jsx","jsxs","_jsxs","WishList","_ref","windowWidth","wishList","userInfo","getUserWishListInfo","isLoggedIn","_useState","_useState2","_slicedToArray","removeModalOpen","setRemoveModalOpen","_useState3","_useState4","modalIndex","setModalIndex","_useState5","_useState6","imgBounds","setImgBounds","_useState7","_useState8","toggleUseEffectHook","setToggleUseEffectHook","imgRef","navigate","current","bounds","getBoundingClientRect","height","width","className","children","email","map","product","index","onClick","concat","id","src","image","alt","onMouseDown","e","preventDefault","ref","style","category","toUpperCase","title","price","stopPropagation","document","body","overflowY"],"sources":["C:/Users/Sycol/ReactProjects/virtual-emporium/client/src/components/WishList/WishList.tsx"],"sourcesContent":["import React, { FC, useState, useEffect, useRef } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport RemoveWishListItemModal from '../RemoveWishListItemModal'\r\nimport '../../styles/WishList/WishList.css'\r\n\r\ninterface WishListProps {\r\n    windowWidth: number,\r\n    wishList: any,\r\n    userInfo: any,\r\n    getUserWishListInfo: Function,\r\n    isLoggedIn: boolean\r\n}\r\n\r\nconst WishList: FC<WishListProps> = ({ windowWidth, wishList, userInfo, getUserWishListInfo, isLoggedIn }) => {\r\n    const [removeModalOpen, setRemoveModalOpen] = useState(false)\r\n    const [modalIndex, setModalIndex] = useState<number | null>(null);\r\n    const [imgBounds, setImgBounds] = useState<DOMRect | null>(null);\r\n    const [toggleUseEffectHook, setToggleUseEffectHook] = useState(false)\r\n    const imgRef = useRef<HTMLImageElement>(null);\r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        if (isLoggedIn) {\r\n            getUserWishListInfo()\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!removeModalOpen) {\r\n            setModalIndex(null)\r\n        }\r\n    }, [removeModalOpen])\r\n\r\n    useEffect(() => {\r\n        if (imgRef.current) {\r\n            const bounds = imgRef.current.getBoundingClientRect();\r\n            setImgBounds(bounds);\r\n            if (bounds.height !== bounds.width) {\r\n                if (toggleUseEffectHook) {\r\n                    setToggleUseEffectHook(false)\r\n                } else {\r\n                    setToggleUseEffectHook(true)\r\n                }\r\n            }\r\n        }\r\n    }, [imgRef, windowWidth, toggleUseEffectHook, wishList]);\r\n\r\n    if (!isLoggedIn) {\r\n        return <div className='mainLoaderWrapper'>\r\n            <span className=\"mainLoader\"></span>\r\n        </div>\r\n    }\r\n\r\n    return (\r\n        <section className='wishListWrapper'>\r\n            <div className='wishListContent'>\r\n                <span className='wishListAccountInfoTxt'>Logged in as: {userInfo.email}</span>\r\n                <h2 className='wishListTitle'>Wish List</h2>\r\n                <div className='wishListMainContentWrapper'>\r\n                    <div className='wishListProductsWrapper'>\r\n                        {wishList.map((product: any, index: number) => (\r\n                            <div className={`wishListProductWrapper`} key={index}>\r\n                                <div className='wishListProductContent' onClick={() => {\r\n                                    navigate(`/product/${product.id}`)\r\n                                }}>\r\n                                    <img src={product.image} className='wishListProductImg' alt='wish list item'\r\n                                        onMouseDown={(e) => e.preventDefault()} ref={imgRef} style={{ height: imgBounds?.width }} />\r\n                                    <div className='wishListProductInfoWrapper'>\r\n                                        <span className='wishListProductCategory'>{product.category.toUpperCase()}</span>\r\n                                        <h4 className='wishListProductTitle'>{product.title}</h4>\r\n                                        <span className='wishListProductPrice'>${product.price}</span>\r\n                                        <div className='wishListProductRemoveBtnWrapper'>\r\n                                            <button className='wishListProductRemoveBtn' onClick={(e) => {\r\n                                                e.stopPropagation();\r\n                                                setModalIndex(index)\r\n                                                setRemoveModalOpen(true)\r\n                                                document.body.style.overflowY = 'hidden';\r\n                                            }}>Remove</button>\r\n                                        </div>\r\n                                        {(removeModalOpen && modalIndex === index) && (\r\n                                            <RemoveWishListItemModal setRemoveModalOpen={setRemoveModalOpen} product={product}\r\n                                                getUserWishListInfo={getUserWishListInfo} wishList={wishList} />\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default WishList\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}